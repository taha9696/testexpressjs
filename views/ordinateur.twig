<!DOCTYPE html>
<html>
<head>
    <title>Search Ordinateur by Category</title>
    <script src="/socket.io/socket.io.js"></script>
</head>
<body>
    <h1>Search Ordinateur by Category</h1>
    
    <div>
        Categorie: <input type="text" id="categoryInput" />
        <button onClick="searchCat()">Search</button>
    </div>
    
    <h2>Results:</h2>
    <div id="results"></div>
    
    <script>
    const socket = io();

    function searchCat() {
        const categoryInput = document.getElementById('categoryInput').value;

        // Emit the "searchCategory" event with the input value
        socket.emit('searchCategory', categoryInput);
    }

    // Listen for the "searchResults" event
    socket.on('searchResults', (data) => {
        const resultsDiv = document.getElementById('results');
        resultsDiv.innerHTML = ''; // Clear previous results

        if (data.length === 0) {
            resultsDiv.innerHTML = '<p>No ordinateurs found for this category.</p>';
            return;
        }

        // Populate results
        const list = document.createElement('ul');
        data.forEach((ordinateur) => {
            const item = document.createElement('li');
            item.textContent = `Model: ${ordinateur.modele}, Category: ${ordinateur.categorie}, Price: ${ordinateur.prix}`;
            list.appendChild(item);
        });
        resultsDiv.appendChild(list);
    });

    // Handle errors
    socket.on('error', (error) => {
        alert(error.message || 'An error occurred');
    });
</script>

</body>
</html>
